
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.0">
    
    
      
        <title>Upgrade Guide - Volto Developer Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bc7e593a.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab28b872.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,400i,700%7CSource+Code+Pro&display=fallback">
        <style>body,input{font-family:"Poppins",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Source Code Pro",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../stylesheets/extra.oct2020.css">
    
      <link rel="stylesheet" href="../stylesheets/pygments.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="red">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#upgrade-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Volto Developer Documentation" class="md-header-nav__button md-logo" aria-label="Volto Developer Documentation">
      
  <img src="../images/volto-h-transparent.svg" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Volto Developer Documentation
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Upgrade Guide
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/plone/volto/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Volto Developer Documentation" class="md-nav__button md-logo" aria-label="Volto Developer Documentation">
      
  <img src="../images/volto-h-transparent.svg" alt="logo">

    </a>
    Volto Developer Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/plone/volto/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Getting Started
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        <span class="md-nav__icon md-icon"></span>
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../getting-started/install/" class="md-nav__link">
      Bootstrap Volto
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../getting-started/roadmap/" class="md-nav__link">
      Developer roadmap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../getting-started/others/" class="md-nav__link">
      Learning resources
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../design-principles/" class="md-nav__link">
      Design principles
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Configuration
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Configuration" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/how-to/" class="md-nav__link">
      What is configurable?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/settings-reference/" class="md-nav__link">
      Settings reference guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/internalproxy/" class="md-nav__link">
      Internal proxy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/richeditor-settings/" class="md-nav__link">
      Richeditor settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configuration/multilingual/" class="md-nav__link">
      Multilingual
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Theming & Semantic UI
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Theming & Semantic UI" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Theming & Semantic UI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../theming/about-semantic/" class="md-nav__link">
      About Semantic UI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../theming/semanticui-theming/" class="md-nav__link">
      Semantic UI Theming
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../theming/theming-engine/" class="md-nav__link">
      Theming Engine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../theming/theming-strategy/" class="md-nav__link">
      Theming strategy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../theming/custom-styling/" class="md-nav__link">
      Custom styling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../theming/using-third-party-themes/" class="md-nav__link">
      Use another theming engine
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Development recipes
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Development recipes" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Development recipes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../recipes/creating-project/" class="md-nav__link">
      Creating a project
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../recipes/folder-structure/" class="md-nav__link">
      Folder structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../recipes/customizing-components/" class="md-nav__link">
      Customizing components
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../recipes/customizing-views/" class="md-nav__link">
      Customizing views
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../recipes/creating-views/" class="md-nav__link">
      Creating new views
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../recipes/i18n/" class="md-nav__link">
      Internationalization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../recipes/express/" class="md-nav__link">
      Express middleware
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../recipes/lazyload/" class="md-nav__link">
      Lazy loading and code splitting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../recipes/overridei18n/" class="md-nav__link">
      Overriding i18n messages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../recipes/appextras/" class="md-nav__link">
      App component insertion point
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../recipes/widget/" class="md-nav__link">
      Create a widget
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../recipes/action-reducers.md" class="md-nav__link">
      Write Redux action/reducers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../recipes/fetch-data/" class="md-nav__link">
      Fetch data
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Blocks
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Blocks" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        Blocks
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../blocks/introduction/" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../blocks/anatomy/" class="md-nav__link">
      Anatomy
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../blocks/settings/" class="md-nav__link">
      Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../blocks/editcomponent/" class="md-nav__link">
      Edit components
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Addons
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Addons" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Addons
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../addons/" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../addons/best-practices/" class="md-nav__link">
      Best practices
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../backend/" class="md-nav__link">
      Backend integration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Deploying
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Deploying" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        <span class="md-nav__icon md-icon"></span>
        Deploying
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../deploying/simple/" class="md-nav__link">
      Simple deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deploying/pm2/" class="md-nav__link">
      Using PM2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deploying/apache/" class="md-nav__link">
      Using apache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deploying/sentry/" class="md-nav__link">
      Using sentry
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Upgrade Guide
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Upgrade Guide
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#upgrading-to-volto-9xx" class="md-nav__link">
    Upgrading to Volto 9.x.x
  </a>
  
    <nav class="md-nav" aria-label="Upgrading to Volto 9.x.x">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#internal-upgrade-to-use-razzle-337" class="md-nav__link">
    Internal upgrade to use Razzle 3.3.7
  </a>
  
    <nav class="md-nav" aria-label="Internal upgrade to use Razzle 3.3.7">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changes-involved" class="md-nav__link">
    Changes involved
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#babel-config-housekeeping" class="md-nav__link">
    Babel config housekeeping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hoisting-problems-on-some-setups" class="md-nav__link">
    Hoisting problems on some setups
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recomended-browserslist-in-packagejson" class="md-nav__link">
    Recomended browserslist in package.json
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-webpack-resolver-plugin" class="md-nav__link">
    New webpack resolver plugin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#content-types-icons" class="md-nav__link">
    Content Types icons
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-to-volto-8xx" class="md-nav__link">
    Upgrading to Volto 8.x.x
  </a>
  
    <nav class="md-nav" aria-label="Upgrading to Volto 8.x.x">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upgrade-packagejson-testing-configuration" class="md-nav__link">
    Upgrade package.json testing configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-to-volto-7xx" class="md-nav__link">
    Upgrading to Volto 7.x.x
  </a>
  
    <nav class="md-nav" aria-label="Upgrading to Volto 7.x.x">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-webpack-resolve-alias-for-volto-themes" class="md-nav__link">
    New webpack resolve alias for Volto themes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-to-volto-6xx" class="md-nav__link">
    Upgrading to Volto 6.x.x
  </a>
  
    <nav class="md-nav" aria-label="Upgrading to Volto 6.x.x">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upgrade-to-node-12" class="md-nav__link">
    Upgrade to Node 12
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-razzle-version-and-related-development-dependencies" class="md-nav__link">
    New Razzle version and related development dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upgrade-local-dependencies-versions" class="md-nav__link">
    Upgrade local dependencies versions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-packagejson-config" class="md-nav__link">
    Update package.json config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prettier" class="md-nav__link">
    Prettier
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stylelint" class="md-nav__link">
    Stylelint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#css-modules-are-not-supported-anymore" class="md-nav__link">
    CSS modules are not supported anymore
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-your-eslint-config" class="md-nav__link">
    Update your eslint config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-wrappers-in-block-editor" class="md-nav__link">
    New wrappers in block editor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-configjs" class="md-nav__link">
    Update config.js
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-to-volto-5xx" class="md-nav__link">
    Upgrading to Volto 5.x.x
  </a>
  
    <nav class="md-nav" aria-label="Upgrading to Volto 5.x.x">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-lazy-loading-boilerplate" class="md-nav__link">
    New lazy loading boilerplate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-lazy-load-components" class="md-nav__link">
    Testing lazy load components
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helmet-title-now-its-centralized-in-viewjsx" class="md-nav__link">
    Helmet title now it's centralized in View.jsx
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-to-volto-4xx" class="md-nav__link">
    Upgrading to Volto 4.x.x
  </a>
  
    <nav class="md-nav" aria-label="Upgrading to Volto 4.x.x">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-initial-blocks-per-content-type-setting-in-alpha-37" class="md-nav__link">
    New initial blocks per content type setting in Alpha 37
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imagesidebar-moved-to-image-block-directory-in-alpha-29" class="md-nav__link">
    ImageSidebar moved to Image Block directory in Alpha 29
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copy-yarnlock-from-volto-starter-kit-in-alpha-17" class="md-nav__link">
    Copy yarn.lock from volto-starter-kit in Alpha 17
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forked-helmet-into-volto-core" class="md-nav__link">
    Forked Helmet into Volto core
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alpha-16-is-a-brownbag-release" class="md-nav__link">
    Alpha 16 is a brownbag release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stylelint-and-prettier-config-in-alpha-14" class="md-nav__link">
    Stylelint and prettier config in Alpha 14
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openobjectbrowser-api-change-in-alpha-11" class="md-nav__link">
    openObjectBrowser API change in Alpha 11
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#renaming-tiles-into-blocks" class="md-nav__link">
    Renaming Tiles into Blocks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-theme-customization-to-your-project" class="md-nav__link">
    Add theme customization to your project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-enzyme-configuration" class="md-nav__link">
    Remove enzyme configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blocks-engine-blocks-configuration-object" class="md-nav__link">
    Blocks engine - Blocks configuration object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blocks-engine-simplification-of-the-edit-blocks-wrapper" class="md-nav__link">
    Blocks engine - Simplification of the edit blocks wrapper
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-view-renaming" class="md-nav__link">
    Default view renaming
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deprecations" class="md-nav__link">
    Deprecations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-to-volto-3x" class="md-nav__link">
    Upgrading to Volto 3.x
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-to-volto-2x" class="md-nav__link">
    Upgrading to Volto 2.x
  </a>
  
    <nav class="md-nav" aria-label="Upgrading to Volto 2.x">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#improved-blocks-hoc" class="md-nav__link">
    Improved Blocks HOC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reordering-of-the-internal-css-added-an-extra" class="md-nav__link">
    Reordering of the internal CSS, added an extra
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-11" type="checkbox" id="nav-11">
    
    <label class="md-nav__link" for="nav-11">
      Developer Guidelines
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Developer Guidelines" data-md-level="1">
      <label class="md-nav__title" for="nav-11">
        <span class="md-nav__icon md-icon"></span>
        Developer Guidelines
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../developer-guidelines/accessibility-guidelines/" class="md-nav__link">
      Accessibility
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../developer-guidelines/language-features/" class="md-nav__link">
      Language features
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../developer-guidelines/react/" class="md-nav__link">
      React
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../developer-guidelines/redux/" class="md-nav__link">
      Redux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../developer-guidelines/routing/" class="md-nav__link">
      Routing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../developer-guidelines/linting/" class="md-nav__link">
      Linting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../developer-guidelines/language-features/" class="md-nav__link">
      Language features
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../developer-guidelines/testing/" class="md-nav__link">
      Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../developer-guidelines/acceptance-tests/" class="md-nav__link">
      Acceptance tests
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Contributing
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Contributing" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        <span class="md-nav__icon md-icon"></span>
        Contributing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../contributing/guidelines/" class="md-nav__link">
      Guidelines
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#upgrading-to-volto-9xx" class="md-nav__link">
    Upgrading to Volto 9.x.x
  </a>
  
    <nav class="md-nav" aria-label="Upgrading to Volto 9.x.x">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#internal-upgrade-to-use-razzle-337" class="md-nav__link">
    Internal upgrade to use Razzle 3.3.7
  </a>
  
    <nav class="md-nav" aria-label="Internal upgrade to use Razzle 3.3.7">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#changes-involved" class="md-nav__link">
    Changes involved
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#babel-config-housekeeping" class="md-nav__link">
    Babel config housekeeping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hoisting-problems-on-some-setups" class="md-nav__link">
    Hoisting problems on some setups
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recomended-browserslist-in-packagejson" class="md-nav__link">
    Recomended browserslist in package.json
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-webpack-resolver-plugin" class="md-nav__link">
    New webpack resolver plugin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#content-types-icons" class="md-nav__link">
    Content Types icons
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-to-volto-8xx" class="md-nav__link">
    Upgrading to Volto 8.x.x
  </a>
  
    <nav class="md-nav" aria-label="Upgrading to Volto 8.x.x">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upgrade-packagejson-testing-configuration" class="md-nav__link">
    Upgrade package.json testing configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-to-volto-7xx" class="md-nav__link">
    Upgrading to Volto 7.x.x
  </a>
  
    <nav class="md-nav" aria-label="Upgrading to Volto 7.x.x">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-webpack-resolve-alias-for-volto-themes" class="md-nav__link">
    New webpack resolve alias for Volto themes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-to-volto-6xx" class="md-nav__link">
    Upgrading to Volto 6.x.x
  </a>
  
    <nav class="md-nav" aria-label="Upgrading to Volto 6.x.x">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upgrade-to-node-12" class="md-nav__link">
    Upgrade to Node 12
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-razzle-version-and-related-development-dependencies" class="md-nav__link">
    New Razzle version and related development dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upgrade-local-dependencies-versions" class="md-nav__link">
    Upgrade local dependencies versions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-packagejson-config" class="md-nav__link">
    Update package.json config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prettier" class="md-nav__link">
    Prettier
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stylelint" class="md-nav__link">
    Stylelint
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#css-modules-are-not-supported-anymore" class="md-nav__link">
    CSS modules are not supported anymore
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-your-eslint-config" class="md-nav__link">
    Update your eslint config
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-wrappers-in-block-editor" class="md-nav__link">
    New wrappers in block editor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-configjs" class="md-nav__link">
    Update config.js
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-to-volto-5xx" class="md-nav__link">
    Upgrading to Volto 5.x.x
  </a>
  
    <nav class="md-nav" aria-label="Upgrading to Volto 5.x.x">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-lazy-loading-boilerplate" class="md-nav__link">
    New lazy loading boilerplate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-lazy-load-components" class="md-nav__link">
    Testing lazy load components
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helmet-title-now-its-centralized-in-viewjsx" class="md-nav__link">
    Helmet title now it's centralized in View.jsx
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-to-volto-4xx" class="md-nav__link">
    Upgrading to Volto 4.x.x
  </a>
  
    <nav class="md-nav" aria-label="Upgrading to Volto 4.x.x">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-initial-blocks-per-content-type-setting-in-alpha-37" class="md-nav__link">
    New initial blocks per content type setting in Alpha 37
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#imagesidebar-moved-to-image-block-directory-in-alpha-29" class="md-nav__link">
    ImageSidebar moved to Image Block directory in Alpha 29
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#copy-yarnlock-from-volto-starter-kit-in-alpha-17" class="md-nav__link">
    Copy yarn.lock from volto-starter-kit in Alpha 17
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#forked-helmet-into-volto-core" class="md-nav__link">
    Forked Helmet into Volto core
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alpha-16-is-a-brownbag-release" class="md-nav__link">
    Alpha 16 is a brownbag release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stylelint-and-prettier-config-in-alpha-14" class="md-nav__link">
    Stylelint and prettier config in Alpha 14
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#openobjectbrowser-api-change-in-alpha-11" class="md-nav__link">
    openObjectBrowser API change in Alpha 11
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#renaming-tiles-into-blocks" class="md-nav__link">
    Renaming Tiles into Blocks
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-theme-customization-to-your-project" class="md-nav__link">
    Add theme customization to your project
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-enzyme-configuration" class="md-nav__link">
    Remove enzyme configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blocks-engine-blocks-configuration-object" class="md-nav__link">
    Blocks engine - Blocks configuration object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blocks-engine-simplification-of-the-edit-blocks-wrapper" class="md-nav__link">
    Blocks engine - Simplification of the edit blocks wrapper
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-view-renaming" class="md-nav__link">
    Default view renaming
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deprecations" class="md-nav__link">
    Deprecations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-to-volto-3x" class="md-nav__link">
    Upgrading to Volto 3.x
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrading-to-volto-2x" class="md-nav__link">
    Upgrading to Volto 2.x
  </a>
  
    <nav class="md-nav" aria-label="Upgrading to Volto 2.x">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#improved-blocks-hoc" class="md-nav__link">
    Improved Blocks HOC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reordering-of-the-internal-css-added-an-extra" class="md-nav__link">
    Reordering of the internal CSS, added an extra
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/plone/volto/edit/master/docs/upgrade-guide/index.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="upgrade-guide">Upgrade Guide<a class="headerlink" href="#upgrade-guide" title="Permanent link">#</a></h1>
<p>This upgrade guide lists all breaking changes in Volto and explains the
 steps that are necessary to upgrade to the lastest version.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are times that updating the Volto boilerplate (the one generated by
<code>@plone/create-volto-app</code>) is enough to fulfill all the changes. If you
haven't heavilly modified it, moving things around and copying over your
dependencies might do when dealing with upgrades. We keep the generator up
to date and in sync with current Volto release.</p>
</div>
<h2 id="upgrading-to-volto-9xx">Upgrading to Volto 9.x.x<a class="headerlink" href="#upgrading-to-volto-9xx" title="Permanent link">#</a></h2>
<h3 id="internal-upgrade-to-use-razzle-337">Internal upgrade to use Razzle 3.3.7<a class="headerlink" href="#internal-upgrade-to-use-razzle-337" title="Permanent link">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you haven't customized your <code>razzle.config.js</code> in your project, or have any
custom plugin in place, you don't have to do anything.</p>
</div>
<p>Razzle is the isometric build system for both the server and the client parts on the top
of which Volto is built. Recently, it has been under heavy development and some new
exciting features have been added to it. The Razzle configuration is now more flexible
and extensible than ever.</p>
<p>This change <em>might</em> be breaking for you if you customized the <code>razzle.config.js</code> heavily
in your projects. Since the new version adds a new way to extend Razzle configuration,
you should adapt your extensions to the new way of doing it. See the documentation for
more information: <a href="https://razzlejs.org/docs/customization#extending-webpack">https://razzlejs.org/docs/customization#extending-webpack</a></p>
<p>It also unifies the way the things are extended in Razzle plugins as well, so if you are
using any official or third party Razzle plugins you should upgrade them to the last
version. If you have developed your own Razzle plugin, you should adapt its signature as
well. See the documentation for more information:
<a href="https://razzlejs.org/docs/customization#plugins">https://razzlejs.org/docs/customization#plugins</a></p>
<p>Razzle 3.3 also has some new <em>experimental</em> features, that will be default in the
upcoming Razzle 4, such as the new <em>React Fast Refresh</em> feature, which fixes the
annoying breaking of the router after any live refresh.</p>
<p>See the documentation of Razzle for more information: <a href="https://razzlejs.org/">https://razzlejs.org/</a></p>
<h4 id="changes-involved">Changes involved<a class="headerlink" href="#changes-involved" title="Permanent link">#</a></h4>
<p>We need to patch an internal Razzle utility in order to allow the use of non-released
Razzle plugins. This feature will be in Razzle 4, unfortunatelly at this point the
development the Razzle 3 branch is freezed already so we need to amend the original
using the patch. The patch will be obsolete and no longer required once we move to
Razzle 4 (see <a href="https://github.com/jaredpalmer/razzle/pull/1467">https://github.com/jaredpalmer/razzle/pull/1467</a>).</p>
<p>Copy (and overwrite) the <code>patches</code> folder into your local project
<a href="https://github.com/plone/volto/tree/master/patches">https://github.com/plone/volto/tree/master/patches</a> or, if you want to be more accurate,
just copy <code>patches/razzle-plugins.patch</code> file and overwrite <code>patches/patchit.sh</code> file.</p>
<h3 id="babel-config-housekeeping">Babel config housekeeping<a class="headerlink" href="#babel-config-housekeeping" title="Permanent link">#</a></h3>
<p>Historically, Volto was using "stage-0" TC-39 proposals. The configuration was starting
showing its age, since Babel 7 dedided to stop maintaining the presets for stages, we
moved to use an static configuration instead of a managed one. That lead to a "living on
the edge" situation since we supported proposals that they didn't make the cut. For more
information about the TC39 approval process read (<a href="https://tc39.es/process-document/">https://tc39.es/process-document/</a>)</p>
<p>We decided to put a bit of order to caos and declare that Volto will support only
stage-4 approved proposals. They are supported by <code>@babel/preset-env</code> out of the box and
provide a good sensible default baseline for Volto.</p>
<p>Proposal deprecations:</p>
<ul>
<li>@babel/plugin-proposal-decorators</li>
<li>@babel/plugin-proposal-function-bind</li>
<li>@babel/plugin-proposal-do-expressions</li>
<li>@babel/plugin-proposal-logical-assignment-operators</li>
<li>@babel/plugin-proposal-pipeline-operator</li>
<li>@babel/plugin-proposal-function-sent</li>
</ul>
<p>In fact, Volto core only used the first one (decorators) and we did the move to not use
them long time ago. However, if you were using some of the others, your code will stop
compiling. Migrate your code or if you want to use the proposal anyways, you'll need to
provide the configuration to your own project (babel.config.js) in your project root
folder.</p>
<p>You might still be using old-style connecting your components to the Redux store using
<code>@connect</code> decorator, in that case, take a look at any connected component in Volto to
take a glimpse on how to migrate the code.</p>
<p>If you were not using any of the deprecated proposals (the most common use case), then
you are good to go and you don't have to do anything.</p>
<h3 id="hoisting-problems-on-some-setups">Hoisting problems on some setups<a class="headerlink" href="#hoisting-problems-on-some-setups" title="Permanent link">#</a></h3>
<p>Some people were experimenting weird hoisting issues when installing dependencies. This
was caused by Babel deprecated proposals packages and its peer dependencies that
sometimes conflicted with other installed packages.</p>
<p>Volto's new Babel configuration uses the configuration provided by <code>babel-razzle-preset</code>
package (Razzle dependency) and delegates the dependencies management to it, except a
few Babel plugins that Volto still needs to work.</p>
<p>In order for your projects not have any problem with the new configuration and comply
with the new model, you need to remove any local dependency for <code>@babel/core</code> and let
Volto handle them.</p>
<div class="highlight"><pre><span></span><code><span class="gh">diff --git a/package.json b/package.json</span>
<span class="gd">--- a/package.json</span>
<span class="gi">+++ b/package.json</span>
<span class="gu">@@ -183,7 +183,6 @@</span>
     &quot;node&quot;: &quot;^10 || ^12 &quot;
   },
   &quot;dependencies&quot;: {
<span class="gd">-    &quot;@babel/core&quot;: &quot;7.11.1&quot;,</span>
     &quot;@plone/volto&quot;: &quot;8.9.2&quot;,
     &quot;mrs-developer&quot;: &quot;1.2.0&quot;,
</code></pre></div>
<h3 id="recomended-browserslist-in-packagejson">Recomended <code>browserslist</code> in <code>package.json</code><a class="headerlink" href="#recomended-browserslist-in-packagejson" title="Permanent link">#</a></h3>
<p>Not a breaking change, but you might want to narrow the targets your Votlo project is
targeting to. This might improve your build times, as well as your bundle size. This is
the recomended <code>browserlist</code> you should include in your local <code>package.json</code>.</p>
<div class="highlight"><pre><span></span><code>  <span class="s2">&quot;browserslist&quot;</span><span class="err">:</span> <span class="p">[</span>
    <span class="s2">&quot;&gt;1%&quot;</span><span class="p">,</span>
    <span class="s2">&quot;last 4 versions&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Firefox ESR&quot;</span><span class="p">,</span>
    <span class="s2">&quot;not ie 11&quot;</span><span class="p">,</span>
    <span class="s2">&quot;not dead&quot;</span>
  <span class="p">]</span><span class="err">,</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please notice that it does not target dead and deprecated browsers by its vendors.</p>
</div>
<h3 id="new-webpack-resolver-plugin">New webpack resolver plugin<a class="headerlink" href="#new-webpack-resolver-plugin" title="Permanent link">#</a></h3>
<p>A new webpack resolver plugin has been integrated with Volto, it reroutes
'local' resolve requests (for example <code>import Something from './Something'</code>) to
'absolute' resolve requests (like
<code>import Something from '@plone/myaddon/Something</code>). This allows the
shadow-based customization mechanisms to work consistently with addons and
Volto.</p>
<p>This is not a breaking change and it shouldn't affect any existing code, but by
its very nature, a resolver plugin has the potential to introduce unexpected
behavior. Just be aware of its existence and take it into consideration if you
notice anything strange.</p>
<h3 id="content-types-icons">Content Types icons<a class="headerlink" href="#content-types-icons" title="Permanent link">#</a></h3>
<p>Helper method <code>getIcon</code> from <code>Url</code> has been removed in favor of <code>getContentIcon</code>
from <code>Content</code>which is now configurable.</p>
<p>See <a href="../configuration/settings-reference/#contenticons">contentIcons docs</a>.</p>
<h2 id="upgrading-to-volto-8xx">Upgrading to Volto 8.x.x<a class="headerlink" href="#upgrading-to-volto-8xx" title="Permanent link">#</a></h2>
<h3 id="upgrade-packagejson-testing-configuration">Upgrade package.json testing configuration<a class="headerlink" href="#upgrade-packagejson-testing-configuration" title="Permanent link">#</a></h3>
<p>The <code>dummy-addons-loader.js</code> file has been renamed to <code>jest-addons-loader.js</code>,
to be more in line with the rest of the existing files. You should add the
following value to the <code>moduleNameMapper</code> property of the <code>jest</code> key in your
project's package.json:</p>
<div class="highlight"><pre><span></span><code>&quot;load-volto-addons&quot;: &quot;&lt;rootDir&gt;/node_modules/@plone/volto/jest-addons-loader.js&quot;,
</code></pre></div>
<h2 id="upgrading-to-volto-7xx">Upgrading to Volto 7.x.x<a class="headerlink" href="#upgrading-to-volto-7xx" title="Permanent link">#</a></h2>
<p>A misspelled file has been renamed. If you import <code>strickthrough.svg</code> in your
project, you'll now find that file at <code>@plone/volto/icons/strikethrough.svg</code>.</p>
<h3 id="new-webpack-resolve-alias-for-volto-themes">New webpack resolve alias for Volto themes<a class="headerlink" href="#new-webpack-resolve-alias-for-volto-themes" title="Permanent link">#</a></h3>
<p>As a "nice to have", a new resolve alias is provided that points to Volto's
theme folder. So, in your project's <code>theme.config</code> file, you can replace:</p>
<p><div class="highlight"><pre><span></span><code><span class="nv">@themesFolder</span><span class="o">:</span> <span class="s1">&#39;../../node_modules/@plone/volto/theme/themes&#39;</span><span class="o">;</span>
<span class="nv">@siteFolder</span><span class="o">:</span> <span class="s2">&quot;../../theme&quot;</span><span class="o">;</span>
<span class="nv">@fontPath</span> <span class="o">:</span> <span class="s2">&quot;../../@{theme}/assets/fonts&quot;</span><span class="o">;</span>
</code></pre></div>
with:</p>
<div class="highlight"><pre><span></span><code><span class="nv">@themesFolder</span><span class="o">:</span> <span class="s1">&#39;~volto-themes&#39;</span><span class="o">;</span>
<span class="nv">@siteFolder</span><span class="o">:</span> <span class="s1">&#39;~@package/../theme&#39;</span><span class="o">;</span>
<span class="nv">@fontPath</span><span class="o">:</span> <span class="s2">&quot;~volto-themes/@{theme}/assets/fonts&quot;</span><span class="o">;</span>
</code></pre></div>
<p>You might consider moving your theme files to a subfolder called <code>site</code>, to
prepare for the arrival of addons theming and their overrides.  In that case,
you would set your <code>@siteFolder</code> to:</p>
<div class="highlight"><pre><span></span><code>@siteFolder: &#39;~@package/../theme/site&#39;;
</code></pre></div>
<h2 id="upgrading-to-volto-6xx">Upgrading to Volto 6.x.x<a class="headerlink" href="#upgrading-to-volto-6xx" title="Permanent link">#</a></h2>
<p>First, update the <code>package.json</code> of your Volto project to Volto 6.x.x.</p>
<div class="highlight"><pre><span></span><code>  <span class="s2">&quot;dependencies&quot;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;@plone/volto&quot;</span><span class="p">:</span> <span class="s2">&quot;6.0.0&quot;</span><span class="p">,</span>
    <span class="err">...</span>
  <span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This release includes a number of changes to the internal dependencies. If you have problems building your project, might be that you need to remove your <code>node_modules</code> and, ultimately, remove also your <code>yarn.lock</code> file. Then run again <code>yarn</code> for rebuilding dependencies.</p>
</div>
<h3 id="upgrade-to-node-12">Upgrade to Node 12<a class="headerlink" href="#upgrade-to-node-12" title="Permanent link">#</a></h3>
<p>We have now dependencies that requires <code>node &gt;=10.19.0</code>. Although Node 10 has still LTS
"maintenance" treatment (see <a href="https://nodejs.org/en/about/releases/">https://nodejs.org/en/about/releases/</a>) the recommended path
is that you use from now on node 12 which is LTS since last October.</p>
<h3 id="new-razzle-version-and-related-development-dependencies">New Razzle version and related development dependencies<a class="headerlink" href="#new-razzle-version-and-related-development-dependencies" title="Permanent link">#</a></h3>
<p>The underlying Razzle package has been upgraded, and although that does not suppose any
change in Volto itself, a lot of development dependencies have been upgraded and they should be updated in your local projects as well. Might be that the builds continue working if you don't update them, but it's better for you to do so for a better development experience.</p>
<h3 id="upgrade-local-dependencies-versions">Upgrade local dependencies versions<a class="headerlink" href="#upgrade-local-dependencies-versions" title="Permanent link">#</a></h3>
<p>You need to update <code>devDependencies</code> in <code>package.json</code> in your local environment:</p>
<div class="highlight"><pre><span></span><code>  <span class="s2">&quot;devDependencies&quot;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;eslint-plugin-prettier&quot;</span><span class="p">:</span> <span class="s2">&quot;3.1.3&quot;</span><span class="p">,</span>
    <span class="nt">&quot;prettier&quot;</span><span class="p">:</span> <span class="s2">&quot;2.0.5&quot;</span><span class="p">,</span>
    <span class="nt">&quot;stylelint-config-idiomatic-order&quot;</span><span class="p">:</span> <span class="s2">&quot;8.1.0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;stylelint-config-prettier&quot;</span><span class="p">:</span> <span class="s2">&quot;8.0.1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;stylelint-prettier&quot;</span><span class="p">:</span> <span class="s2">&quot;1.1.2&quot;</span><span class="p">,</span>
  <span class="p">}</span>
</code></pre></div>
<p>and remove entirely the <code>resolutions</code> key:</p>
<div class="highlight"><pre><span></span><code>  <span class="s2">&quot;resolutions&quot;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;@plone/volto/razzle/webpack-dev-server&quot;</span><span class="p">:</span> <span class="s2">&quot;3.2.0&quot;</span>
  <span class="p">}</span>
</code></pre></div>
<h3 id="update-packagejson-config">Update <code>package.json</code> config<a class="headerlink" href="#update-packagejson-config" title="Permanent link">#</a></h3>
<p>Add this key to the <code>jest.moduleNameMapper</code>:</p>
<div class="highlight"><pre><span></span><code><span class="s2">&quot;jest&quot;</span><span class="err">:</span>
  <span class="s2">&quot;moduleNameMapper&quot;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;@plone/volto/babel&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;rootDir&gt;/node_modules/@plone/volto/babel&quot;</span><span class="p">,</span>
    <span class="err">...</span>
  <span class="p">}</span>
</code></pre></div>
<p>because new Jest is a bit more picky when importing externals.</p>
<h3 id="prettier">Prettier<a class="headerlink" href="#prettier" title="Permanent link">#</a></h3>
<p>Prettier has been updated, introducing some breaking formatting changes. It's recommended that you upgrade your local version of <code>prettier</code> and reformat your code with it using:</p>
<p><code>yarn prettier:fix</code></p>
<h3 id="stylelint">Stylelint<a class="headerlink" href="#stylelint" title="Permanent link">#</a></h3>
<p><code>stylelint</code> has been upgraded too, and it introduces some changes in the declaration
of the styles order. It's recommended that you upgrade your local version of <code>prettier</code> and reformat your code with it using:</p>
<p><code>yarn stylelint:fix</code></p>
<h3 id="css-modules-are-not-supported-anymore">CSS modules are not supported anymore<a class="headerlink" href="#css-modules-are-not-supported-anymore" title="Permanent link">#</a></h3>
<p>Razzle does not support them anymore, so neither do we. If you need them, you could add
a Webpack config in your local <code>razzle.config.js</code>.</p>
<h3 id="update-your-eslint-config">Update your eslint config<a class="headerlink" href="#update-your-eslint-config" title="Permanent link">#</a></h3>
<p>Introduced in the Volto 5 series, it's recommended that you update your local ESLint config. In the past, we used <code>.eslintrc</code> file to do so. In order to support automatically Volto addons, you should remove it and use a JS based config one <code>.eslintrc.js</code> with this contents:</p>
<div class="highlight"><pre><span></span><code><span class="kr">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">projectRootPath</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">packageJson</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">projectRootPath</span><span class="p">,</span> <span class="s1">&#39;package.json&#39;</span><span class="p">));</span>

<span class="c1">// Extends ESlint configuration for adding the aliases to `src` directories in Volto addons</span>
<span class="kr">const</span> <span class="nx">addonsAliases</span> <span class="o">=</span> <span class="p">[];</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">packageJson</span><span class="p">.</span><span class="nx">addons</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">addons</span> <span class="o">=</span> <span class="nx">packageJson</span><span class="p">.</span><span class="nx">addons</span><span class="p">;</span>
  <span class="nx">addons</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">addon</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">addonPath</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">addon</span><span class="si">}</span><span class="sb">/src`</span><span class="p">;</span>
    <span class="nx">addonsAliases</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="nx">addon</span><span class="p">,</span> <span class="nx">addonPath</span><span class="p">]);</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="kr">extends</span><span class="o">:</span> <span class="s1">&#39;./node_modules/@plone/volto/.eslintrc&#39;</span><span class="p">,</span>
  <span class="nx">settings</span><span class="o">:</span> <span class="p">{</span>
    <span class="s1">&#39;import/resolver&#39;</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">alias</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">map</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">[</span><span class="s1">&#39;@plone/volto&#39;</span><span class="p">,</span> <span class="s1">&#39;@plone/volto/src&#39;</span><span class="p">],</span>
          <span class="p">...</span><span class="nx">addonsAliases</span><span class="p">,</span>
          <span class="p">[</span><span class="s1">&#39;@package&#39;</span><span class="p">,</span> <span class="s1">&#39;./src&#39;</span><span class="p">],</span>
        <span class="p">],</span>
        <span class="nx">extensions</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;.js&#39;</span><span class="p">,</span> <span class="s1">&#39;.jsx&#39;</span><span class="p">,</span> <span class="s1">&#39;.json&#39;</span><span class="p">],</span>
      <span class="p">},</span>
      <span class="s1">&#39;babel-plugin-root-import&#39;</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">rootPathSuffix</span><span class="o">:</span> <span class="s1">&#39;src&#39;</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">};</span>
</code></pre></div>
<h3 id="new-wrappers-in-block-editor">New wrappers in block editor<a class="headerlink" href="#new-wrappers-in-block-editor" title="Permanent link">#</a></h3>
<p>We have improved the overall UX of the block drag and drop feature by using the library
<code>react-beautiful-dnd</code> in the block editor. It introduces new wrappers (belonging to the
lib machinery) in the structure. The original structure and class names are still in
there (as children of these wrappers) to maintain maximum backwards compatibility. Those
might be cleaned up in next major versions, so if for some reason you have customized
the styling of your blocks in edit mode relying in the old structure, you might want to
review and adapt them.</p>
<h3 id="update-configjs">Update <code>config.js</code><a class="headerlink" href="#update-configjs" title="Permanent link">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is required since Volto version 6.1.0 <a href="https://github.com/plone/volto/pull/1541">1541</a></p>
</div>
<p>Add these to the <code>config.js</code> of your project:</p>
<div class="highlight"><pre><span></span><code><span class="kr">export</span> <span class="kr">const</span> <span class="nx">addonRoutes</span> <span class="o">=</span> <span class="p">[];</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">addonReducers</span> <span class="o">=</span> <span class="p">{};</span>
</code></pre></div>
<h2 id="upgrading-to-volto-5xx">Upgrading to Volto 5.x.x<a class="headerlink" href="#upgrading-to-volto-5xx" title="Permanent link">#</a></h2>
<p>First, update the <code>package.json</code> of your Volto project to Volto 5.x.x.</p>
<div class="highlight"><pre><span></span><code>  <span class="s2">&quot;dependencies&quot;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;@plone/volto&quot;</span><span class="p">:</span> <span class="s2">&quot;5.0.0&quot;</span><span class="p">,</span>
    <span class="err">...</span>
  <span class="p">}</span>
</code></pre></div>
<h3 id="new-lazy-loading-boilerplate">New lazy loading boilerplate<a class="headerlink" href="#new-lazy-loading-boilerplate" title="Permanent link">#</a></h3>
<p>Volto is now capable of splitting and lazy load components. This allows for better
performance and reduced bundle sizes, the client also has to parse and load less code,
improving the user experience, specially on mobile devices.</p>
<p>The boilerplate includes changes in the structural foundation of Volto itself. So if you
have updated in your projects any of these components:</p>
<ul>
<li><code>src/helpers/Html/Html.jsx</code></li>
<li><code>src/components/theme/App/App.jsx</code></li>
<li><code>src/server.jsx</code></li>
<li><code>src/client.jsx</code></li>
</ul>
<p>you should adapt them to the newests changes in Volto source code. You can do that by
diffing the new ones with yours.</p>
<h3 id="testing-lazy-load-components">Testing lazy load components<a class="headerlink" href="#testing-lazy-load-components" title="Permanent link">#</a></h3>
<p>The whole process has been designed to have a minimal impact in existing projects.
However, only a thing should be changed in your components tests. Specially if your components are composed of original Volto components (not SemanticUI ones, though).</p>
<p>You should adapt them by mocking the Volto component or resolve (await) for them in an
async construction before the test is fired. See this Codepen example:</p>
<p><a href="https://codesandbox.io/s/loadable-async-tests-l2bx9">https://codesandbox.io/s/loadable-async-tests-l2bx9</a></p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s2">&quot;react&quot;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">render</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;@testing-library/react&quot;</span><span class="p">;</span>
<span class="kr">import</span> <span class="nx">App</span> <span class="nx">from</span> <span class="s2">&quot;./App&quot;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Component1</span><span class="p">,</span> <span class="nx">Component2</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;./components&quot;</span><span class="p">;</span>

<span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;CustomComponent&quot;</span><span class="p">,</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
  <span class="nx">it</span><span class="p">(</span><span class="s2">&quot;rendered lazily&quot;</span><span class="p">,</span> <span class="nx">async</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="p">{</span> <span class="nx">container</span><span class="p">,</span> <span class="nx">getByText</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">render</span><span class="p">(&lt;</span><span class="nt">App</span> <span class="p">/&gt;);</span>

    <span class="nx">await</span> <span class="nx">Component1</span><span class="p">;</span>
    <span class="nx">await</span> <span class="nx">Component2</span><span class="p">;</span>

    <span class="nx">expect</span><span class="p">(</span><span class="nx">container</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">).</span><span class="nx">toMatchSnapshot</span><span class="p">();</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">getByText</span><span class="p">(</span><span class="s2">&quot;Component1&quot;</span><span class="p">));</span>
    <span class="nx">expect</span><span class="p">(</span><span class="nx">getByText</span><span class="p">(</span><span class="s2">&quot;Component2&quot;</span><span class="p">));</span>
  <span class="p">});</span>
</code></pre></div>
<p>This is also another pattern used in Volto core for testing, you can transform your test
in async aware like this:</p>
<div class="highlight"><pre><span></span><code><span class="gd">--- a/src/components/manage/Preferences/PersonalPreferences.test.jsx</span>
<span class="gi">+++ b/src/components/manage/Preferences/PersonalPreferences.test.jsx</span>
<span class="gu">@@ -3,6 +3,7 @@ import renderer from &#39;react-test-renderer&#39;;</span>
 import { Provider } from &#39;react-intl-redux&#39;;
 import configureStore from &#39;redux-mock-store&#39;;
 import { MemoryRouter } from &#39;react-router-dom&#39;;
<span class="gi">+import { wait } from &#39;@testing-library/react&#39;;</span>

 import PersonalPreferences from &#39;./PersonalPreferences&#39;;

<span class="gu">@@ -13,7 +14,7 @@ jest.mock(&#39;react-portal&#39;, () =&gt; ({</span>
 }));

 describe(&#39;PersonalPreferences&#39;, () =&gt; {
<span class="gd">-  it(&#39;renders a personal preferences component&#39;, () =&gt; {</span>
<span class="gi">+  it(&#39;renders a personal preferences component&#39;, async () =&gt; {</span>
     const store = mockStore({
       intl: {
         locale: &#39;en&#39;,
<span class="gu">@@ -36,7 +37,8 @@ describe(&#39;PersonalPreferences&#39;, () =&gt; {</span>
         &lt;/MemoryRouter&gt;
       &lt;/Provider&gt;,
     );
<span class="gd">-    const json = component.toJSON();</span>
<span class="gd">-    expect(json).toMatchSnapshot();</span>
<span class="gi">+    await wait(() =&gt; {</span>
<span class="gi">+      expect(component.toJSON()).toMatchSnapshot();</span>
<span class="gi">+    });</span>
   });
 });
</code></pre></div>
<h3 id="helmet-title-now-its-centralized-in-viewjsx">Helmet title now it's centralized in <code>View.jsx</code><a class="headerlink" href="#helmet-title-now-its-centralized-in-viewjsx" title="Permanent link">#</a></h3>
<p>All the calls for update the title in the document performed by <code>Helmet</code> are now
centralized in the <code>View.jsx</code> components. It's recommended to remove all the Helmet
calls for updating the title from your components specially if you are using some of the
SEO addons for Volto, since not doing that could interfere with them.</p>
<h2 id="upgrading-to-volto-4xx">Upgrading to Volto 4.x.x<a class="headerlink" href="#upgrading-to-volto-4xx" title="Permanent link">#</a></h2>
<p>First, update your <code>package.json</code> to Volto 4.x.x.</p>
<div class="highlight"><pre><span></span><code>  <span class="s2">&quot;dependencies&quot;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;@plone/volto&quot;</span><span class="p">:</span> <span class="s2">&quot;4.0.0&quot;</span><span class="p">,</span>
    <span class="err">...</span>
  <span class="p">}</span>
</code></pre></div>
<h3 id="new-initial-blocks-per-content-type-setting-in-alpha-37">New initial blocks per content type setting in Alpha 37<a class="headerlink" href="#new-initial-blocks-per-content-type-setting-in-alpha-37" title="Permanent link">#</a></h3>
<p>Not breaking change, but now there's a new setting in Blocks, <code>initialBlocks</code> where you can define a the initial blocks for all content types. You can override the default ('title' and a 'text' block) and provide your own by modifying the configuration object:</p>
<div class="highlight"><pre><span></span><code><span class="kr">const</span> <span class="nx">initialBlocks</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">Document</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;leadimage&#39;</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="s1">&#39;listing&#39;</span> <span class="p">]</span>
<span class="p">};</span>
</code></pre></div>
<p>provide an empty object if you don't want to define any additional initial blocks and keep the default.</p>
<div class="highlight"><pre><span></span><code><span class="kr">const</span> <span class="nx">initialBlocks</span> <span class="o">=</span> <span class="p">{};</span>
</code></pre></div>
<h3 id="imagesidebar-moved-to-image-block-directory-in-alpha-29">ImageSidebar moved to Image Block directory in Alpha 29<a class="headerlink" href="#imagesidebar-moved-to-image-block-directory-in-alpha-29" title="Permanent link">#</a></h3>
<p>For better resource grouping, the <code>ImageSidebar</code> component has been moved to the <code>Image</code> block component directory: <code>components/manage/Blocks/Image</code></p>
<h3 id="copy-yarnlock-from-volto-starter-kit-in-alpha-17">Copy <code>yarn.lock</code> from volto-starter-kit in Alpha 17<a class="headerlink" href="#copy-yarnlock-from-volto-starter-kit-in-alpha-17" title="Permanent link">#</a></h3>
<p>Due to changes in the dependency tree, it's required to use an specific <code>yarn.lock</code> file by deleting it and copy the one here: <a href="https://github.com/plone/volto-starter-kit/blob/master/yarn.lock">https://github.com/plone/volto-starter-kit/blob/master/yarn.lock</a> before upgrading to Volto alpha 17.</p>
<h3 id="forked-helmet-into-volto-core">Forked Helmet into Volto core<a class="headerlink" href="#forked-helmet-into-volto-core" title="Permanent link">#</a></h3>
<p>Due to the inactivity of the Helmet project, we decided to fork it to the core. It's part of the Volto helpers now. You have to update your imports accordingly. Please notice that now it's a named import:</p>
<div class="highlight"><pre><span></span><code><span class="gd">--- a/src/components/Views/ReportView.jsx</span>
<span class="gi">+++ b/src/components/Views/ReportView.jsx</span>
<span class="gu">@@ -1,6 +1,6 @@</span>
 import React from &#39;react&#39;;
 import PropTypes from &#39;prop-types&#39;;
<span class="gd">-import Helmet from &#39;react-helmet&#39;;</span>
<span class="gi">+import { Helmet } from &#39;@plone/volto/helpers&#39;;</span>
 import { defineMessages, injectIntl, FormattedMessage } from &#39;react-intl&#39;;
 import { format, parse } from &#39;date-fns&#39;;
 import { filter, map } from &#39;lodash&#39;;
</code></pre></div>
<h3 id="alpha-16-is-a-brownbag-release">Alpha 16 is a brownbag release<a class="headerlink" href="#alpha-16-is-a-brownbag-release" title="Permanent link">#</a></h3>
<p>There was a problem with the projects using Volto eslint config when upgrading to latest versions related to typescript, we will take of that in the near future. So skip this version.</p>
<h3 id="stylelint-and-prettier-config-in-alpha-14">Stylelint and prettier config in Alpha 14<a class="headerlink" href="#stylelint-and-prettier-config-in-alpha-14" title="Permanent link">#</a></h3>
<p>In your project's boilerplate, you need to update the stylelint and prettier configuration accordingly to the changes made in Alpha 14 in <code>package.json</code> like this:</p>
<div class="highlight"><pre><span></span><code><span class="gh">diff --git a/package.json b/package.json</span>
<span class="gh">index 7c8194c..5c63469 100644</span>
<span class="gd">--- a/package.json</span>
<span class="gi">+++ b/package.json</span>
<span class="gu">@@ -46,26 +46,51 @@</span>
   },
   &quot;prettier&quot;: {
     &quot;trailingComma&quot;: &quot;all&quot;,
<span class="gd">-    &quot;singleQuote&quot;: true</span>
<span class="gi">+    &quot;singleQuote&quot;: true,</span>
<span class="gi">+    &quot;overrides&quot;: [</span>
<span class="gi">+      {</span>
<span class="gi">+        &quot;files&quot;: &quot;*.overrides&quot;,</span>
<span class="gi">+        &quot;options&quot;: {</span>
<span class="gi">+          &quot;parser&quot;: &quot;less&quot;</span>
<span class="gi">+        }</span>
<span class="gi">+      }</span>
<span class="gi">+    ]</span>
   },
   &quot;stylelint&quot;: {
     &quot;extends&quot;: [
<span class="gd">-      &quot;stylelint-config-standard&quot;,</span>
<span class="gd">-      &quot;stylelint-config-idiomatic-order&quot;,</span>
<span class="gd">-      &quot;./node_modules/prettier-stylelint/config.js&quot;</span>
<span class="gd">-    ]</span>
<span class="gi">+      &quot;stylelint-config-idiomatic-order&quot;</span>
<span class="gi">+    ],</span>
<span class="gi">+    &quot;plugins&quot;: [</span>
<span class="gi">+      &quot;stylelint-prettier&quot;</span>
<span class="gi">+    ],</span>
<span class="gi">+    &quot;rules&quot;: {</span>
<span class="gi">+      &quot;prettier/prettier&quot;: true,</span>
<span class="gi">+      &quot;rule-empty-line-before&quot;: [</span>
<span class="gi">+        &quot;always-multi-line&quot;,</span>
<span class="gi">+        {</span>
<span class="gi">+          &quot;except&quot;: [</span>
<span class="gi">+            &quot;first-nested&quot;</span>
<span class="gi">+          ],</span>
<span class="gi">+          &quot;ignore&quot;: [</span>
<span class="gi">+            &quot;after-comment&quot;</span>
<span class="gi">+          ]</span>
<span class="gi">+        }</span>
<span class="gi">+      ]</span>
<span class="gi">+    },</span>
<span class="gi">+    &quot;ignoreFiles&quot;: &quot;theme/themes/default/**/*.overrides&quot;</span>
   },
   &quot;engines&quot;: {
     &quot;node&quot;: &quot;^10 || ^12&quot;
   },
   &quot;dependencies&quot;: {
<span class="gd">-    &quot;@plone/volto&quot;: &quot;4.0.0-alpha.10&quot;</span>
<span class="gi">+    &quot;@plone/volto&quot;: &quot;4.0.0-alpha.14&quot;</span>
   },
   &quot;devDependencies&quot;: {
     &quot;eslint-plugin-prettier&quot;: &quot;3.0.1&quot;,
<span class="gd">-    &quot;postcss-overrides&quot;: &quot;3.1.4&quot;,</span>
<span class="gd">-    &quot;prettier&quot;: &quot;1.17.0&quot;,</span>
<span class="gd">-    &quot;prettier-stylelint&quot;: &quot;0.4.2&quot;</span>
<span class="gi">+    &quot;prettier&quot;: &quot;1.19.1&quot;,</span>
<span class="gi">+    &quot;stylelint-config-idiomatic-order&quot;: &quot;6.2.0&quot;,</span>
<span class="gi">+    &quot;stylelint-config-prettier&quot;: &quot;6.0.0&quot;,</span>
<span class="gi">+    &quot;stylelint-prettier&quot;: &quot;1.1.1&quot;</span>
   },
   &quot;resolutions&quot;: {
     &quot;@plone/volto/razzle/webpack-dev-server&quot;: &quot;3.2.0&quot;
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are linting activelly your project, the build might be broken after this update. You should run:
<div class="highlight"><pre><span></span><code>$ yarn prettier:fix
$ yarn stylelint:fix
</code></pre></div>
then commit the changes.</p>
</div>
<h3 id="openobjectbrowser-api-change-in-alpha-11">openObjectBrowser API change in Alpha 11<a class="headerlink" href="#openobjectbrowser-api-change-in-alpha-11" title="Permanent link">#</a></h3>
<p>The API of the <code>ObjectBrowser</code> component changed in alpha 11 to make it more flexible.
In case you had custom blocks using it, you have to update the call in case you were using a <code>link</code> mode:</p>
<div class="highlight"><pre><span></span><code><span class="gu">@@ -42,7 +42,7 @@ const OtherComp = ({</span>
                     href: &#39;&#39;,
                   });
                 }
<span class="gd">-              : () =&gt; openObjectBrowser(&#39;link&#39;)</span>
<span class="gi">+              : () =&gt; openObjectBrowser({ mode: &#39;link&#39; })</span>
           }
           onChange={(name, value) =&gt; {
             onChangeBlock(block, {
</code></pre></div>
<p>See the <a href="../blocks/editcomponent/#openobjectbrowser-handler-api">blocks section</a> for more details.</p>
<h3 id="renaming-tiles-into-blocks">Renaming Tiles into Blocks<a class="headerlink" href="#renaming-tiles-into-blocks" title="Permanent link">#</a></h3>
<p>An internal renaming to use the term <code>Blocks</code> everywhere was done to unify naming through the code a and the documentation.</p>
<p>Plone RESTAPI was updated to that purpose too, and running an upgrade step (do so in Plone's Addons control panel) is required in order to migrate the data. No step is required if you are using a brand new ZODB.</p>
<p>This is the versions compatibility table across all the packages involved:</p>
<p>Volto 4 - plone.restapi &gt;= 5.0.0 - kitconcept.voltodemo &gt;= 2.0</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The renaming happened in Volto 4 alpha.10 and plone.restapi 5.0.0. Volto 4 alpha versions under that release use older versions of <code>plone.restapi</code> and <code>kitconcept.voltodemo</code>, however if you are using alpha releases it's recommended to upgrade to latest alpha or the final release of Volto 4.</p>
</div>
<p>The project configuration should also be updated, in your <code>src/config.js</code>:</p>
<div class="highlight"><pre><span></span><code><span class="gh">diff --git a/src/config.js b/src/config.js</span>
<span class="gh">index f1fe9c2..9517c38 100644</span>
<span class="gd">--- a/src/config.js</span>
<span class="gi">+++ b/src/config.js</span>
<span class="gu">@@ -16,7 +16,7 @@ import {</span>
   settings as defaultSettings,
   views as defaultViews,
   widgets as defaultWidgets,
<span class="gd">-  tiles as defaultTiles,</span>
<span class="gi">+  blocks as defaultBlocks,</span>
 } from &#39;@plone/volto/config&#39;;

 export const settings = {
<span class="gu">@@ -31,6 +31,6 @@ export const widgets = {</span>
   ...defaultWidgets,
 };

<span class="gd">-export const tiles = {</span>
<span class="gd">-  ...defaultTiles,</span>
<span class="gi">+export const blocks = {</span>
<span class="gi">+  ...defaultBlocks,</span>
 };
</code></pre></div>
<h3 id="add-theme-customization-to-your-project">Add theme customization to your project<a class="headerlink" href="#add-theme-customization-to-your-project" title="Permanent link">#</a></h3>
<p>Volto 4 now also expects a file named <code>src/theme.js</code> with this content by default:</p>
<div class="highlight"><pre><span></span><code><span class="kr">import</span> <span class="s1">&#39;semantic-ui-less/semantic.less&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="s1">&#39;@plone/volto/../theme/themes/pastanaga/extras/extras.less&#39;</span><span class="p">;</span>
</code></pre></div>
<h3 id="remove-enzyme-configuration">Remove enzyme configuration<a class="headerlink" href="#remove-enzyme-configuration" title="Permanent link">#</a></h3>
<p>Enzyme has been removed, in favor of <code>@testing-library/react</code>, and the configuration should be removed in <code>package.json</code>:</p>
<div class="highlight"><pre><span></span><code><span class="gh">diff --git a/package.json b/package.json</span>
<span class="gh">index 27c7f8d..8f5f088 100644</span>
<span class="gd">--- a/package.json</span>
<span class="gi">+++ b/package.json</span>
<span class="gu">@@ -44,9 +44,6 @@</span>
       &quot;default&quot;,
       &quot;jest-junit&quot;
     ],
<span class="gd">-    &quot;snapshotSerializers&quot;: [</span>
<span class="gd">-      &quot;enzyme-to-json/serializer&quot;</span>
<span class="gd">-    ],</span>
     &quot;transform&quot;: {
       &quot;^.+\\.js(x)?$&quot;: &quot;babel-jest&quot;,
       &quot;^.+\\.css$&quot;: &quot;jest-css-modules&quot;,
</code></pre></div>
<h3 id="blocks-engine-blocks-configuration-object">Blocks engine - Blocks configuration object<a class="headerlink" href="#blocks-engine-blocks-configuration-object" title="Permanent link">#</a></h3>
<p>The blocks engine was updated and there are some important breaking changes, in case that
you've developed custom blocks. The configuration object is now unified and expresses all
the properties to model a block. This is how a block in the <code>defaultBlocks</code> object looks
like:</p>
<div class="highlight"><pre><span></span><code><span class="kr">const</span> <span class="nx">defaultBlocks</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">title</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;title&#39;</span><span class="p">,</span> <span class="c1">// The name (id) of the block</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Title&#39;</span><span class="p">,</span> <span class="c1">// The display name of the block</span>
    <span class="nx">icon</span><span class="o">:</span> <span class="nx">titleSVG</span><span class="p">,</span> <span class="c1">// The icon used in the block chooser</span>
    <span class="nx">group</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="c1">// The group (blocks can be grouped, displayed in the chooser)</span>
    <span class="nx">view</span><span class="o">:</span> <span class="nx">ViewTitleBlock</span><span class="p">,</span> <span class="c1">// The view mode component</span>
    <span class="nx">edit</span><span class="o">:</span> <span class="nx">EditTitleBlock</span><span class="p">,</span> <span class="c1">// The edit mode component</span>
    <span class="nx">restricted</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// If the block is restricted, it won&#39;t show in in the chooser</span>
    <span class="nx">mostUsed</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// A meta group `most used`, appearing at the top of the chooser</span>
    <span class="nx">blockHasOwnFocusManagement</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="c1">// Set this to true if the block manages its own focus</span>
    <span class="nx">security</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">addPermission</span><span class="o">:</span> <span class="p">[],</span> <span class="c1">// Future proof (not implemented yet) add user permission role(s)</span>
      <span class="nx">view</span><span class="o">:</span> <span class="p">[],</span> <span class="c1">// Future proof (not implemented yet) view user role(s)</span>
    <span class="p">},</span>
  <span class="p">},</span>
  <span class="p">...</span>
</code></pre></div>
<p>There is an additional object <code>groupBlocksOrder</code> that contains an array with the order
that the blocks group should appear:</p>
<div class="highlight"><pre><span></span><code><span class="kr">const</span> <span class="nx">groupBlocksOrder</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;mostUsed&#39;</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Most used&#39;</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Text&#39;</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;media&#39;</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Media&#39;</span> <span class="p">},</span>
  <span class="p">{</span> <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;common&#39;</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Common&#39;</span> <span class="p">},</span>
<span class="p">];</span>
</code></pre></div>
<p>You should adapt and merge the configuration of your own custom blocks to match the
<code>defaultBlocks</code> and <code>groupBlocksOrder</code> one. You can modify the order of the groups and
create your own as well.</p>
<h3 id="blocks-engine-simplification-of-the-edit-blocks-wrapper">Blocks engine - Simplification of the edit blocks wrapper<a class="headerlink" href="#blocks-engine-simplification-of-the-edit-blocks-wrapper" title="Permanent link">#</a></h3>
<p>The edit block wrapper boilerplate was quite big, and for bootstrap an edit block you had to copy it from an existing block. Now all this boilerplate has been transferred to the Blocks Engine, so bootstrapping the edit component of a block is easier and do not require any pre-existing code.</p>
<p>In order to upgrade your blocks you should simplify the outter <code>&lt;div&gt;</code> (took as example the Title block):</p>
<div class="highlight"><pre><span></span><code><span class="gd">--- a/src/components/manage/Blocks/Title/Edit.jsx</span>
<span class="gi">+++ b/src/components/manage/Blocks/Title/Edit.jsx</span>
<span class="gu">@@ -138,11 +138,7 @@ class Edit extends Component {</span>
       return &lt;div /&gt;;
     }
     return (
<span class="gd">-      &lt;div</span>
<span class="gd">-        role=&quot;presentation&quot;</span>
<span class="gd">-        onClick={() =&gt; this.props.onSelectBlock(this.props.block)}</span>
<span class="gd">-        className={cx(&#39;block title&#39;, { selected: this.props.selected })}</span>
<span class="gd">-      &gt;</span>
<span class="gi">+      &lt;&gt;</span>
         &lt;Editor
           onChange={this.onChange}
           editorState={this.state.editorState}
<span class="gu">@@ -185,7 +181,7 @@ class Edit extends Component {</span>
             this.node = node;
           }}
         /&gt;
<span class="gd">-      &lt;/div&gt;</span>
<span class="gi">+      &lt;/&gt;</span>
     );
   }
 }
</code></pre></div>
<p>The blocks engine now takes care for the keyboard navigation of the blocks, so you need to remove the outter <code>&lt;div&gt;</code> from your custom block, then your block doesn't have to react to the change on <code>this.props.selected</code> either, because it's also something that the blocks engine already does for you.</p>
<p>The focus management is also transferred to the engine, so no needed for your block to manage the focus. However, if your block does indeed require to manage its own focus, then you should mark it with the <code>blockHasOwnFocusManagement</code> property in the blocks configuration object:</p>
<div class="highlight"><pre><span></span><code>    <span class="nx">text</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">id</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span>
      <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Text&#39;</span><span class="p">,</span>
      <span class="nx">icon</span><span class="o">:</span> <span class="nx">textSVG</span><span class="p">,</span>
      <span class="nx">group</span><span class="o">:</span> <span class="s1">&#39;text&#39;</span><span class="p">,</span>
      <span class="nx">view</span><span class="o">:</span> <span class="nx">ViewTextBlock</span><span class="p">,</span>
      <span class="nx">edit</span><span class="o">:</span> <span class="nx">EditTextBlock</span><span class="p">,</span>
      <span class="nx">restricted</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">mostUsed</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="hll">      <span class="nx">blockHasOwnFocusManagement</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span>      <span class="nx">security</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">addPermission</span><span class="o">:</span> <span class="p">[],</span>
        <span class="nx">view</span><span class="o">:</span> <span class="p">[],</span>
      <span class="p">},</span>
    <span class="p">},</span>
</code></pre></div>
<h3 id="default-view-renaming">Default view renaming<a class="headerlink" href="#default-view-renaming" title="Permanent link">#</a></h3>
<p>The default view for content types <code>DocumentView.jsx</code> has been renamed to a more appropiate <code>DefaultView.jsx</code>. This view contains the code for rendering blocks in case the content type has been Blocks enabled. Enable Blocks on your content types by composing the view of your content type using <code>DefaultView</code> component.</p>
<h3 id="deprecations">Deprecations<a class="headerlink" href="#deprecations" title="Permanent link">#</a></h3>
<ul>
<li>The old messages container has been removed since it's not used anymore by Volto. We changed it to use <code>Toast</code> library.</li>
<li>Improve the Pastanaga Editor block wrapper container layout, deprecating the hack <code>.ui.wrapper &gt; *</code>.</li>
</ul>
<h2 id="upgrading-to-volto-3x">Upgrading to Volto 3.x<a class="headerlink" href="#upgrading-to-volto-3x" title="Permanent link">#</a></h2>
<p>Volto was upgraded to use Razzle 3.0.0 which is not a breaking change itself,
but it forces to some changes in the boilerplate on your Volto projects. You
should change the babel config by deleting .babelrc file and creating a new
file <code>babel.config.js</code> with these contents:</p>
<div class="highlight"><pre><span></span><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;@plone/volto/babel&#39;</span><span class="p">);</span>
</code></pre></div>
<p>Then update your <code>package.json</code> to Volto 3.x.</p>
<div class="highlight"><pre><span></span><code>  <span class="s2">&quot;dependencies&quot;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;@plone/volto&quot;</span><span class="p">:</span> <span class="s2">&quot;3.0.0&quot;</span><span class="p">,</span>
    <span class="err">...</span>
  <span class="p">}</span>
</code></pre></div>
<p>Volto 3.x is compatible with the new changes introduced in the vocabularies
endpoint in plone.restapi 4.0.0. If you custom build a widget based in the
Volto ones, you should update them as well. Volto updated its own widget set to
support them:</p>
<ul>
<li><code>components/manage/Widgets/ArrayWidget</code></li>
<li><code>components/manage/Widgets/SelectWidget</code></li>
<li><code>components/manage/Widgets/TokenWidget</code></li>
</ul>
<p>They all use <code>react-select</code> third party library for render it.</p>
<h2 id="upgrading-to-volto-2x">Upgrading to Volto 2.x<a class="headerlink" href="#upgrading-to-volto-2x" title="Permanent link">#</a></h2>
<h3 id="improved-blocks-hoc">Improved Blocks HOC<a class="headerlink" href="#improved-blocks-hoc" title="Permanent link">#</a></h3>
<p>The Blocks HOC (High Order Component) was changed to lift off some of the
features from the blocks themselves and now it takes care of them by its own.</p>
<ul>
<li>The delete block feature was moved to it</li>
<li>The keylisteners for navigating through blocks was moved to it</li>
<li>The properties passed down to the blocks are improved and documented</li>
</ul>
<p>This change only applies to your existing blocks, you have to update them
accordingly by delete the trash icon and action from the end of your blocks</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">selected</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
  <span class="p">&lt;</span><span class="nt">Button</span>
    <span class="na">icon</span>
    <span class="na">basic</span>
    <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">onDeleteBlock</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">block</span><span class="p">)}</span>
    <span class="na">className</span><span class="o">=</span><span class="s">&quot;block-delete-button&quot;</span>
  <span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">Icon</span> <span class="na">name</span><span class="o">=</span><span class="p">{</span><span class="nx">trashSVG</span><span class="p">}</span> <span class="na">size</span><span class="o">=</span><span class="s">&quot;18px&quot;</span> <span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
<span class="p">)}</span>
</code></pre></div>
<p>Modify the parent element of your block making this changes:</p>
<div class="highlight"><pre><span></span><code><span class="p">&lt;</span><span class="nt">div</span>
  <span class="na">role</span><span class="o">=</span><span class="s">&quot;presentation&quot;</span>
  <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">onSelectBlock</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">block</span><span class="p">)}</span>
  <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">cx</span><span class="p">(</span><span class="s1">&#39;block hero&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">selected</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">selected</span><span class="p">,</span>
  <span class="p">})}</span>
  <span class="na">tabIndex</span><span class="o">=</span><span class="p">{</span><span class="mf">0</span><span class="p">}</span>
  <span class="na">onKeyDown</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span> <span class="p">=&gt;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">handleKeyDown</span><span class="p">(</span>
      <span class="nx">e</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">index</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">block</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">node</span>
    <span class="p">)</span>
  <span class="p">}</span>
  <span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">node</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
  <span class="p">}}</span>
<span class="p">&gt;</span>
</code></pre></div>
<ul>
<li>Add the keylisteners to the parent element of your block</li>
</ul>
<div class="highlight"><pre><span></span><code>  <span class="nx">onKeyDown</span><span class="o">=</span><span class="p">{</span><span class="nx">e</span> <span class="p">=&gt;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">handleKeyDown</span><span class="p">(</span>
      <span class="nx">e</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">index</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">block</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">node</span>
    <span class="p">)</span>
  <span class="p">}</span>
</code></pre></div>
<ul>
<li>Add a ref to it and assign it to <code>this.node</code>.</li>
</ul>
<div class="highlight"><pre><span></span><code>  <span class="nx">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">node</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
  <span class="p">}}</span>
</code></pre></div>
<ul>
<li>Add a proper role for it</li>
</ul>
<div class="highlight"><pre><span></span><code>  <span class="nx">role</span><span class="o">=</span><span class="s2">&quot;presentation&quot;</span>
</code></pre></div>
<p>Take a look into the implementation of the default Volto blocks to get a grasp
on all the edge cases related to keyboard navigation and how to deal with them.</p>
<h3 id="reordering-of-the-internal-css-added-an-extra">Reordering of the internal CSS, added an extra<a class="headerlink" href="#reordering-of-the-internal-css-added-an-extra" title="Permanent link">#</a></h3>
<p>The internal Volto CSS has been tidied up and reordered, for that reason, some
other extras have been introduced and the theme.config in your project needs to
be updated by making sure you have these two extras in the
<code>theme.config</code> file:</p>
<div class="highlight"><pre><span></span><code><span class="c">/* Extras */</span>
<span class="nv">@main</span>        <span class="o">:</span> <span class="s1">&#39;pastanaga&#39;</span><span class="o">;</span>
<span class="nv">@custom</span>      <span class="o">:</span> <span class="s1">&#39;pastanaga&#39;</span><span class="o">;</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../deploying/sentry/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Using sentry
              </div>
            </div>
          </a>
        
        
          <a href="../developer-guidelines/accessibility-guidelines/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Accessibility
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Made with  by the Plone Community - All code owned by the Plone Foundation
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.6a3d08fc.min.js"></script>
      <script src="../assets/javascripts/bundle.71201edf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>